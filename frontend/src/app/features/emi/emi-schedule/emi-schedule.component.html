<div class="emi-schedule">
	<mat-card class="header-card">





























































































































































































































































































}  }    }      grid-template-columns: 1fr;    .summary-section {    }      }        }          width: 100%;        .pay-button {        }          padding: 8px;        td {        th,        font-size: 12px;      .emi-table {    .table-card {    }      }        font-size: 12px;      mat-card-subtitle {      }        font-size: 20px;      mat-card-title {      }        padding: 16px;      mat-card-header {    .header-card {    padding: 16px;  .emi-schedule {@media (max-width: 600px) {/* Responsive adjustments */}  }    }      }        }          color: #ff9800;        &.pending {        }          color: #4caf50;        &.paid {        color: #333;        font-weight: 700;        font-size: 24px;      .value {      }        margin-bottom: 8px;        letter-spacing: 0.5px;        text-transform: uppercase;        color: #999;        font-size: 12px;      .label {      border-left: 4px solid #667eea;      border-radius: 8px;      background: linear-gradient(135deg, #f5f7fa 0%, #e9ecef 100%);      padding: 16px;      align-items: center;      flex-direction: column;      display: flex;    .summary-stat {    padding: 0 20px 20px;    margin-top: 24px;    gap: 16px;    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));    display: grid;  .summary-section {  }    }      }        }          width: 18px;          height: 18px;          font-size: 18px;        mat-icon {        font-size: 13px;        font-weight: 500;        color: #4caf50;        gap: 4px;        align-items: center;        display: flex;      .paid-badge {      }        }          width: 16px;          height: 16px;          font-size: 16px;          margin-right: 4px;        mat-icon {        min-width: auto;        font-size: 12px;        padding: 6px 12px;      .pay-button {      }        }          color: white !important;          background: #ff9800 !important;        &[color="warn"] {        }          color: white !important;          background: #2196f3 !important;        &[color="primary"] {        }          color: white !important;          background: #4caf50 !important;        &[color="accent"] {        font-size: 12px;        padding: 4px 12px;        min-height: 24px;      mat-chip {      }        background: #f9f9f9;      tr:hover {      }        }          font-weight: 500;          color: #f57c00;        &.remaining {        }          color: #d32f2f;        &.interest {        }          color: #388e3c;        &.principal {        }          color: #667eea;          font-weight: 600;        &.amount {        }          color: #333;          font-weight: 600;        &.emi-number {        color: #666;        border-bottom: 1px solid #f0f0f0;        padding: 16px;      td {      }        border-bottom: 2px solid #e0e0e0;        text-align: left;        padding: 16px;        font-weight: 600;        color: #333;        background: #f5f7fa;      th {      border-collapse: collapse;      width: 100%;    .emi-table {    }      overflow-x: auto;    .table-wrapper {    }      padding: 0;    mat-card-content {    border-radius: 8px;    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);    background: white;  .table-card {  }    }      }        margin: 0;        font-size: 14px;        color: #999;      p {      }        margin: 0 auto 16px;        color: #ccc;        width: 64px;        height: 64px;        font-size: 64px;      .empty-icon {    mat-card-content {    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);    background: white;    padding: 60px 20px;    text-align: center;  .empty-card {  }    }      }        }          margin: 0;          color: #c62828;        p {        }          width: 28px;          height: 28px;          font-size: 28px;          color: #f44336;        .error-icon {        gap: 16px;        padding: 24px;        align-items: center;        display: flex;      mat-card-content {      border-left: 4px solid #f44336;      background: #ffebee;    mat-card {    margin-bottom: 24px;  .error-card {  }    }      font-size: 14px;      color: #666;      margin-top: 16px;    p {    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);    border-radius: 8px;    background: white;    padding: 60px 20px;    justify-content: center;    align-items: center;    flex-direction: column;    display: flex;  .loading-container {  }    }      font-size: 14px;      color: rgba(255, 255, 255, 0.9);    mat-card-subtitle {    }      margin-bottom: 8px;      font-weight: 600;      font-size: 28px;      color: white;    mat-card-title {    }      padding: 24px;    mat-card-header {    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);    color: white;    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);    margin-bottom: 24px;  .header-card {  min-height: 100vh;  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);		<mat-card-header>
			<mat-card-title>EMI Payment Schedule</mat-card-title>
			<mat-card-subtitle>Track and manage your loan repayment schedule</mat-card-subtitle>
		</mat-card-header>
	</mat-card>

	<div *ngIf="loading" class="loading-container">
		<mat-spinner></mat-spinner>
		<p>Loading schedule...</p>
	</div>

	<div *ngIf="error" class="error-card">
		<mat-card>
			<mat-card-content>
				<mat-icon class="error-icon">error_outline</mat-icon>
				<p>{{ error }}</p>
			</mat-card-content>
		</mat-card>
	</div>

	<mat-card *ngIf="!loading && !error && schedule.length > 0" class="table-card">
		<mat-card-content>
			<div class="table-wrapper">
				<table mat-table [dataSource]="schedule" class="emi-table">
					<!-- EMI Number Column -->
					<ng-container matColumnDef="emiNumber">
						<th mat-header-cell *matHeaderCellDef>EMI #</th>
						<td mat-cell *matCellDef="let element" class="emi-number">{{ element.emiNumber }}</td>
					</ng-container>

					<!-- Due Date Column -->
					<ng-container matColumnDef="dueDate">
						<th mat-header-cell *matHeaderCellDef>Due Date</th>
						<td mat-cell *matCellDef="let element">{{ element.dueDate }}</td>
					</ng-container>

					<!-- Amount Column -->
					<ng-container matColumnDef="amount">
						<th mat-header-cell *matHeaderCellDef>EMI Amount</th>
						<td mat-cell *matCellDef="let element" class="amount">₹{{ element.amount | number:'1.0-0' }}</td>
					</ng-container>

					<!-- Principal Column -->
					<ng-container matColumnDef="principal">
						<th mat-header-cell *matHeaderCellDef>Principal</th>
						<td mat-cell *matCellDef="let element" class="principal">₹{{ element.principal | number:'1.0-0' }}</td>
					</ng-container>

					<!-- Interest Column -->
					<ng-container matColumnDef="interest">
						<th mat-header-cell *matHeaderCellDef>Interest</th>
						<td mat-cell *matCellDef="let element" class="interest">₹{{ element.interest | number:'1.0-0' }}</td>
					</ng-container>

					<!-- Remaining Balance Column -->
					<ng-container matColumnDef="remainingBalance">
						<th mat-header-cell *matHeaderCellDef>Remaining</th>
						<td mat-cell *matCellDef="let element" class="remaining">₹{{ element.remainingBalance | number:'1.0-0' }}</td>
					</ng-container>

					<!-- Status Column -->
					<ng-container matColumnDef="status">
						<th mat-header-cell *matHeaderCellDef>Status</th>
						<td mat-cell *matCellDef="let element">
							<mat-chip [color]="getStatusColor(element.status)" selected>
								{{ element.status | titlecase }}
							</mat-chip>
						</td>
					</ng-container>

					<!-- Actions Column -->
					<ng-container matColumnDef="actions">
						<th mat-header-cell *matHeaderCellDef>Action</th>
						<td mat-cell *matCellDef="let element">
							<button 
								mat-raised-button 
								color="primary"
								*ngIf="element.status?.toLowerCase() === 'scheduled'"
								(click)="openPaymentDialog(element)"
								class="pay-button">
								<mat-icon>payment</mat-icon>
								Pay
							</button>
							<span *ngIf="element.status?.toLowerCase() !== 'scheduled'" class="paid-badge">
								<mat-icon>check_circle</mat-icon>
								Paid
							</span>
						</td>
					</ng-container>

					<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
					<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
				</table>
			</div>

			<!-- Summary Section -->
			<div class="summary-section">
				<div class="summary-stat">
					<span class="label">Total EMIs</span>
					<span class="value">{{ schedule.length }}</span>
				</div>
				<div class="summary-stat">
					<span class="label">Paid</span>
					<span class="value paid">{{ getPaidCount() }}</span>
				</div>
				<div class="summary-stat">
					<span class="label">Pending</span>
					<span class="value pending">{{ getPendingCount() }}</span>
				</div>
				<div class="summary-stat">
					<span class="label">Total Amount</span>
					<span class="value">₹{{ getTotalAmount() | number:'1.0-0' }}</span>
				</div>
			</div>
		</mat-card-content>
	</mat-card>

	<mat-card *ngIf="!loading && !error && schedule.length === 0" class="empty-card">
		<mat-card-content>
			<mat-icon class="empty-icon">event_note</mat-icon>
			<p>No EMI schedule available. You may not have any active loans.</p>
		</mat-card-content>
	</mat-card>
</div>
